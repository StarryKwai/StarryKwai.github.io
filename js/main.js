"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _regenerator(){var m,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",n=e.toStringTag||"@@toStringTag";function r(e,t,n,r){var o,a,i,c,s,l,d,u,f,t=t&&t.prototype instanceof h?t:h,t=Object.create(t.prototype);return _regeneratorDefine2(t,"_invoke",(o=e,a=n,d=r||[],u=!1,f={p:l=0,n:0,v:m,a:g,f:g.bind(m,4),d:function(e,t){return i=e,c=0,s=m,f.n=t,p}},function(e,t,n){if(1<l)throw TypeError("Generator is already running");for(u&&1===t&&g(t,n),c=t,s=n;(v=c<2?m:s)||!u;){i||(c?c<3?(1<c&&(f.n=-1),g(c,s)):f.n=s:f.v=s);try{if(l=2,i){if(v=i[e=c?e:"next"]){if(!(v=v.call(i,s)))throw TypeError("iterator result is not an object");if(!v.done)return v;s=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+e+"' method"),c=1);i=m}else if((v=(u=f.n<0)?s:o.call(a,f))!==p)break}catch(e){i=m,c=1,s=e}finally{l=1}}return{value:v,done:u}}),!0),t;function g(e,t){for(c=e,s=t,v=0;!u&&l&&!n&&v<d.length;v++){var n,r=d[v],o=f.p,a=r[2];3<e?(n=a===t)&&(s=r[(c=r[4])?5:c=3],r[4]=r[5]=m):r[0]<=o&&((n=e<2&&o<r[1])?(c=0,f.v=t,f.n=r[1]):o<a&&(n=e<3||r[0]>t||a<t)&&(r[4]=e,r[5]=t,f.n=a,c=0))}if(n||1<e)return p;throw u=!0,t}}var p={};function h(){}function o(){}function a(){}var v=Object.getPrototypeOf,e=[][t]?v(v([][t]())):(_regeneratorDefine2(v={},t,function(){return this}),v),i=a.prototype=h.prototype=Object.create(e);function c(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,_regeneratorDefine2(e,n,"GeneratorFunction")),e.prototype=Object.create(i),e}return _regeneratorDefine2(i,"constructor",o.prototype=a),_regeneratorDefine2(a,"constructor",o),_regeneratorDefine2(a,n,o.displayName="GeneratorFunction"),_regeneratorDefine2(i),_regeneratorDefine2(i,n,"Generator"),_regeneratorDefine2(i,t,function(){return this}),_regeneratorDefine2(i,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:r,m:c}})()}function _regeneratorDefine2(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(_regeneratorDefine2=function(e,t,n,r){function o(t,n){_regeneratorDefine2(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(c){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=c.apply(e,i);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}document.addEventListener("DOMContentLoaded",function(){function d(a,r,e){function o(e){return e&&e.replace(/"/g,"&quot;")||""}function i(e){d&&(r=a.parentNode,g&&(r.style.visibility="visible"),0===a.offsetHeight&&(r.style.visibility="hidden",g=!0));var t,n,r=e.updated,o=e.isResize,e=e.mounted;r.length&&e.length&&!o&&(btf.loadLightbox(a.querySelectorAll("img:not(.medium-zoom-image)")),f.getGroups().length===u?(btf.setLoading.remove(a),d||f.off("renderComplete",i)):c&&(btf.setLoading.remove(a),t=a,(n=document.createElement("button")).innerHTML="".concat(GLOBAL_CONFIG.infinitegrid.buttonText,'<i class="fa-solid fa-arrow-down"></i>'),n.addEventListener("click",function(){n.remove(),btf.setLoading.add(t),p(f.getGroups().length+1,s)},{once:!0}),t.insertAdjacentElement("afterend",n)))}var c=e.isButton,s=e.limit,l=e.firstLimit,d=e.tabs,e=r.length,u=Math.ceil((e-l)/s+1),f=new InfiniteGrid.JustifiedInfiniteGrid(a,{gap:5,isConstantSize:!0,sizeRange:[150,600],useTransform:!0}),g=!1,m=function(e){var t=e.alt?'alt="'.concat(o(e.alt),'"'):"",n=e.title?'title="'.concat(o(e.title),'"'):"";return'<div class="item">\n        <img src="'.concat(e.url,'" data-grid-maintained-target="true" ').concat(t," ").concat(n," />\n      </div>")},p=function(e,t,n){f.append(function(e,t){e=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?(e-1)*t:(e-2)*t+l;return r.slice(e,e+t).map(m)}(e,t,n),e)},t=btf.debounce(function(e){e=(+e.groupKey||0)+1;1===e?p(e,l,!0):p(e,s),e===u&&f.off("requestAppend",t)},300);btf.setLoading.add(a),f.on("renderComplete",i),c?p(1,l,!0):(f.on("requestAppend",t),f.renderItems()),btf.addGlobalFn("pjaxSendOnce",function(){return f.destroy()})}function a(){function n(){return document.body.scrollHeight<=t&&(o.classList.add("rightside-show"),!0)}var r,e,o=document.getElementById("rightside"),t=window.innerHeight+56,a=0,i=document.getElementById("page-header"),c="undefined"!=typeof chatBtn,s=GLOBAL_CONFIG.percent.rightside;n()||(r="",e=btf.throttle(function(){var e=window.scrollY||document.documentElement.scrollTop,t=a<e;56<(a=e)?(""===r&&(i.classList.add("nav-fixed"),o.classList.add("rightside-show")),t?"down"!==r&&(i.classList.remove("nav-visible"),c&&window.chatBtn.hide(),r="down"):"up"!==r&&(i.classList.add("nav-visible"),c&&window.chatBtn.show(),r="up")):(r="",0===e&&i.classList.remove("nav-fixed","nav-visible"),o.classList.remove("rightside-show")),s&&y(e),n()},300),btf.addEventListenerPjax(window,"scroll",e,{passive:!0}))}function t(n){var r=(window.globalFn||{}).themeChange||{};r&&Object.keys(r).forEach(function(e){var t=r[e];["disqus","disqusjs"].includes(e)?setTimeout(function(){return t(n)},300):t(n)})}function i(e){e.forEach(function(e){e.textContent=btf.diffDate(e.getAttribute("datetime"),!0),e.style.display="inline"})}function c(){m(),p(),b(document.querySelectorAll("#article-container .gallery-container")),h(),L(),_(),E(),A()}function e(){var e,t,n,r,o;f(!0),s.classList.add("show"),(o=document.getElementById("recent-posts"))&&o.classList.contains("masonry")&&(o=function(){var e=new InfiniteGrid.MasonryInfiniteGrid(".recent-post-items",{gap:{horizontal:10,vertical:20},useTransform:!0,useResizeObserver:!0});e.renderItems(),btf.addGlobalFn("pjaxCompleteOnce",function(){e.destroy()},"removeJustifiedIndexPostUI")},"function"==typeof InfiniteGrid?o():btf.getScript("".concat(GLOBAL_CONFIG.infinitegrid.js)).then(o)),"post"===GLOBAL_CONFIG_SITE.pageType?((o=document.getElementById("post-outdate-notice"))&&(r=(n=JSON.parse(o.getAttribute("data"))).limitDay,e=n.messagePrev,t=n.messageNext,n=n.postUpdate,r<=(r=btf.diffDate(n))&&(o.textContent="".concat(e," ").concat(r," ").concat(t),o.hidden=!1)),GLOBAL_CONFIG.relativeDate.post&&i(document.querySelectorAll("#post-meta time"))):(GLOBAL_CONFIG.relativeDate.homepage&&i(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(n=document.getElementById("runtimeshow"))&&(e=n.getAttribute("data-publishDate"),n.textContent="".concat(btf.diffDate(e)," ").concat(GLOBAL_CONFIG.runtime)),(r=document.getElementById("last-push-date"))&&(t=r.getAttribute("data-lastPushDate"),r.textContent=btf.diffDate(t,!0)),(o=document.querySelector("#aside-cat-list.expandBtn"))&&btf.addEventListenerPjax(o,"click",function(e){var t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))},!0)),"home"===GLOBAL_CONFIG_SITE.pageType&&(o=document.getElementById("scroll-down"))&&btf.addEventListenerPjax(o,"click",function(){btf.scrollToDest(document.getElementById("content-inner").offsetTop,300)}),a(),c(),"shuoshuo"!==GLOBAL_CONFIG_SITE.pageType&&btf.switchComments(document),(o=document.getElementById("toggle-menu"))&&btf.addEventListenerPjax(o,"click",function(){g.open()})}var r,s,o,l,n,u=!1,f=function(e){function t(e){return Array.from(e).reduce(function(e,t){return e+t.offsetWidth},0)}e&&(e=t(document.querySelector("#blog-info > a").children),n=t(document.getElementById("menus").children),r=e+n,s=document.getElementById("nav"));var n,e=window.innerWidth<=768||r>s.offsetWidth-120;s.classList.toggle("hide-menu",e)},g={open:function(){btf.overflowPaddingR.add(),btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),u=!0},close:function(){btf.overflowPaddingR.remove(),btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),u=!1}},m=function(){var e,n,o,t,r,a,i,c,s,l,d,u,f,g,m,p,h,v,b,y,L=GLOBAL_CONFIG.highlight;L&&(e=L.highlightCopy,n=L.highlightLang,o=L.highlightHeightLimit,t=L.highlightFullpage,i=L.highlightMacStyle,L=L.plugin,r=GLOBAL_CONFIG_SITE.isHighlightShrink,a=e||n||void 0!==r||t||i,i="highlight.js"===L?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]'),(a||o)&&i.length&&(c="prismjs"===L,s=!0===r?"closed":"",l=void 0!==r?'<i class="fas fa-angle-down expand"></i>':"",d=e?'<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>':"",u=t?'<i class="fa-solid fa-up-right-and-down-left-from-center fullpage-button"></i>':"",f=function(e,t){void 0!==GLOBAL_CONFIG.Snackbar?btf.snackbarShow(t):(e.textContent=t,e.style.opacity=1,setTimeout(function(){e.style.opacity=0},800))},g=function(){var n=_asyncToGenerator(_regenerator().m(function e(t,n){var r;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.writeText(t);case 1:f(n,GLOBAL_CONFIG.copy.success),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Failed to copy: ",r),f(n,GLOBAL_CONFIG.copy.noSupport);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(e,t){return n.apply(this,arguments)}}(),m=function(e,t){var e=e.parentNode,n=(e.classList.add("copy-true"),c?"pre code":"table .code pre"),n=e.querySelector(n);n&&(g(n.innerText,t.previousElementSibling),e.classList.remove("copy-true"))},p=function(e){return e.classList.toggle("closed")},h=function(e,t){e=e.closest("figure.highlight").classList.toggle("code-fullpage");document.body.style.overflow=e?"hidden":"",t.classList.toggle("fa-down-left-and-up-right-to-center",e),t.classList.toggle("fa-up-right-and-down-left-from-center",!e)},v=function(e){var t=e.target.classList,n=e.currentTarget;t.contains("expand")?p(n):t.contains("copy-button")?m(n,e.target):t.contains("fullpage-button")&&h(n,e.target)},b=function(e){return e.currentTarget.classList.toggle("expand-done")},y=function(e,t){var n,r=document.createDocumentFragment();a&&((n=document.createElement("div")).className="highlight-tools ".concat(s),n.innerHTML='<div class="macStyle"><div class="mac-close"></div><div class="mac-minimize"></div><div class="mac-maximize"></div></div>'+l+e+d+u,btf.addEventListenerPjax(n,"click",v),r.appendChild(n)),o&&function(e){for(var t=new Map,n=e;n!==document.body&&null!=n;)"none"===window.getComputedStyle(n).display&&t.set(n,n.getAttribute("style")||""),n=n.parentNode;var r="visibility: hidden !important; display: block !important;",e=(t.forEach(function(e,t){t.setAttribute("style",e?e+";"+r:r)}),e.offsetHeight);return t.forEach(function(e,t){""===e?t.removeAttribute("style"):t.setAttribute("style",e)}),e}(t)>o+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',btf.addEventListenerPjax(e,"click",b),r.appendChild(e)),c?t.parentNode.insertBefore(r,t):t.insertBefore(r,t.firstChild)},i.forEach(function(e){var t="";c&&btf.wrap(e,"figure",{class:"highlight"}),n?(c?t=e.getAttribute("data-language")||"Code":"plain"!==(t=e.getAttribute("class").split(" ")[1])&&void 0!==t||(t="Code"),y('<div class="code-lang">'.concat(t,"</div>"),e)):y("",e)})))},p=function(){GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach(function(e){var t,n=e.title||e.alt;n&&((t=document.createElement("div")).className="img-alt text-center",t.textContent=n,e.insertAdjacentElement("afterend",t))})},h=function(){btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)"))},v=function(){var t=_asyncToGenerator(_regenerator().m(function e(t){var n;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch(t);case 1:return n=e.v,e.n=2,n.json();case 2:return e.a(2,e.v);case 3:return e.p=3,n=e.v,console.error("Failed to fetch URL:",n),e.a(2,[])}},e,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=_asyncToGenerator(_regenerator().m(function e(s){var l,t,n=arguments;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(l=1<n.length&&void 0!==n[1]&&n[1],s.length){e.n=1;break}return e.a(2);case 1:if(t=function(){var e=_asyncToGenerator(_regenerator().m(function e(){var t,n,r,o,a,i,c;return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:t=_createForOfIteratorHelper(s),e.p=1,t.s();case 2:if((n=t.n()).done){e.n=10;break}if(n=n.value,btf.isHidden(n)||n.classList.contains("loaded"))return e.a(3,9);e.n=3;break;case 3:if(r={isButton:"true"===n.getAttribute("data-button"),limit:parseInt(n.getAttribute("data-limit"),10),firstLimit:parseInt(n.getAttribute("data-first"),10),tabs:l},o=n.firstElementChild,a=o.textContent,o.textContent="",n.classList.add("loaded"),e.p=4,"url"===n.getAttribute("data-type"))return e.n=5,v(a);e.n=6;break;case 5:i=e.v,e.n=7;break;case 6:i=JSON.parse(a);case 7:d(o,i,r),e.n=9;break;case 8:e.p=8,c=e.v,console.error("Gallery data parsing failed:",c);case 9:e.n=2;break;case 10:e.n=12;break;case 11:e.p=11,c=e.v,t.e(c);case 12:return e.p=12,t.f(),e.f(12);case 13:return e.a(2)}},e,null,[[4,8],[1,11,12,13]])}));return function(){return e.apply(this,arguments)}}(),"function"==typeof InfiniteGrid)return e.n=2,t();e.n=3;break;case 2:e.n=5;break;case 3:return e.n=4,btf.getScript(GLOBAL_CONFIG.infinitegrid.js);case 4:return e.n=5,t();case 5:return e.a(2)}},e)}));return function(e){return t.apply(this,arguments)}}(),y=function(e){var e=btf.getScrollPercent(e,document.body),t=document.getElementById("go-up");e<95?(t.classList.add("show-percent"),t.querySelector(".scroll-percent").textContent=e):t.classList.remove("show-percent")},L=function(){var s,n,l,d,u,f,g,m,e,p=GLOBAL_CONFIG_SITE.isToc,h=GLOBAL_CONFIG.isAnchor,v=document.getElementById("article-container");v&&(p||h)&&(p&&(n=document.getElementById("card-toc"),d=(l=n.querySelector(".toc-content")).querySelectorAll(".toc-link"),u=n.querySelector(".toc-percentage"),f=l.classList.contains("is-expand"),btf.addEventListenerPjax(l,"click",function(e){var t=e.target.closest(".toc-link");t&&(e.preventDefault(),btf.scrollToDest(btf.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""))),300),window.innerWidth<900&&n.classList.remove("open"))}),s=function(e){var t=l.clientHeight,n=e.offsetTop,e=e.clientHeight,r=l.scrollTop,n=n-r,t=(t-e)/2;n!=t&&(l.scrollTop=r+(n-t))},l.style.display="block"),g=v.querySelectorAll("h1,h2,h3,h4,h5,h6"),m="",e=btf.throttle(function(){var e=window.scrollY||document.documentElement.scrollTop,t=(p&&GLOBAL_CONFIG.percent.toc&&(u.textContent=btf.getScrollPercent(e,v)),e);if(0!==t){for(var n="",r="",o=0;o<g.length;o++){var a=g[o];if(!(t>btf.getEleTop(a)-80))break;a=a.id,n=a?"#"+encodeURI(a):"",r=o}if(m!==r&&(h&&btf.updateAnchor(n),m=r,p&&(l.querySelectorAll(".active").forEach(function(e){return e.classList.remove("active")}),n))){var i=d[r];if(i.classList.add("active"),setTimeout(function(){return s(i)},0),!f)for(var c=i.parentNode;!c.matches(".toc");)c.matches("li")&&c.classList.add("active"),c=c.parentNode}}},100),btf.addEventListenerPjax(window,"scroll",e,{passive:!0}))},w={readmode:function(){function e(){t.classList.remove("read-mode"),n.remove(),n.removeEventListener("click",e)}var t=document.body,n=document.createElement("button");t.classList.add("read-mode"),n.type="button",n.className="fas fa-sign-out-alt exit-readmode",n.addEventListener("click",e),t.appendChild(n)},darkmode:function(){var e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"==e?(btf.activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(btf.activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),btf.saveToLocal.set("theme",e,2),t(e)},"rightside-config":function(e){var t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout(function(){t.classList.remove("status")},300)),t.classList.toggle("show")},"go-up":function(){btf.scrollToDest(0,500)},"hide-aside-btn":function(){var e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";btf.saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":function(e,t){var n=document.getElementById("card-toc"),r=(n.style.transition="transform 0.3s ease-in-out",n.clientHeight),t=t.getBoundingClientRect(),o=window.innerHeight-t.bottom-30;o<r&&(n.style.transformOrigin="right ".concat(r-o-t.height/2,"px")),n.classList.toggle("open"),n.addEventListener("transitionend",function(){n.style.cssText=""},{once:!0})},"chat-btn":function(){window.chatBtnFn()},translateLink:function(){window.translateFn.translatePage()}},_=(document.getElementById("rightside").addEventListener("click",function(e){var t=e.target.closest("[id]");t&&w[t.id]&&w[t.id](e.currentTarget,t)}),function(){var e=document.querySelectorAll("#article-container table");e.length&&e.forEach(function(e){e.closest(".highlight")||btf.wrap(e,"div",{class:"table-wrap"})})}),E=function(){var e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach(function(e){return e.addEventListener("click",function(e){e=e.currentTarget;e.classList.add("open"),b(e.nextElementSibling.querySelectorAll(".gallery-container"))},{once:!0})})},A=function(){var o,n,e=document.querySelectorAll("#article-container .tabs");e.length&&(o=function(e,n){e.forEach(function(e,t){e.classList.toggle("active",t===n)})},n=function(e){var t,n,r=e.target.closest("button");r&&!r.classList.contains("active")&&(t=_toConsumableArray(e.currentTarget.children),n=_toConsumableArray(e.currentTarget.nextElementSibling.children),r=t.indexOf(r),o(t,r),e.currentTarget.classList.remove("no-default"),o(n,r),b(n[r].querySelectorAll(".gallery-container"),!0))},e.forEach(function(e){var t;btf.addEventListenerPjax(e.firstElementChild,"click",n),btf.addEventListenerPjax(e.lastElementChild,"click",(t=e,function(e){e.target.closest("button")&&btf.scrollToDest(btf.getEleTop(t),300)}))}))};btf.addGlobalFn("pjaxComplete",e,"refreshFn"),e(),window.addEventListener("resize",function(){f(!1),u&&btf.isHidden(document.getElementById("toggle-menu"))&&g.close()}),(n=document.getElementById("menu-mask"))&&n.addEventListener("click",function(){g.close()}),(n=document.querySelector("#sidebar-menus .menus_items"))&&n.addEventListener("click",function(e){e=e.target.closest(".site-page.group");e&&e.classList.toggle("hide")}),GLOBAL_CONFIG.islazyloadPlugin&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),btf.addGlobalFn("pjaxComplete",function(){window.lazyLoadInstance.update()},"lazyload")),void 0!==GLOBAL_CONFIG.copyright&&(n=GLOBAL_CONFIG.copyright,o=n.limitCount,l=n.languages,document.body.addEventListener("copy",function(e){e.preventDefault();var t=window.getSelection(0).toString(),n=t;return t.length>o&&(n="".concat(t,"\n\n\n").concat(l.author,"\n").concat(l.link).concat(window.location.href,"\n").concat(l.source,"\n").concat(l.info)),(e.clipboardData?e:window).clipboardData.setData("text",n)})),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){void 0===btf.saveToLocal.get("theme")&&(e.matches?t("dark"):t("light"))}),window.addEventListener("hexo-blog-decrypt",function(e){c(),window.translateFn.translateInitialization(),Object.values(window.globalFn.encrypt).forEach(function(e){e()})})});